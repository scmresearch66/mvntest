node("master") {
  checkout scm

  version = '1.0-SNAPSHOT'

  stage('Build site') {
    sh 'cd my-app && ./gradlew build'

    println "my-app/target/my-app-${version}.jar"
    archiveArtifacts artifacts: "my-app/target/*.jar", fingerprint: false
  }
 /*
  node("DockerNode") {
     env.PATH = "/usr/local/bin:${env.PATH}"

     stage('Inside Docker') {
       timeout(160) {
         img = docker.image("openjdk:8")

         img.inside() {
           checkout scm

           sh 'hostname'
           sh 'ls -l my-app'
           sh 'cd my-app && ./gradlew build'

           /* archiveArtifacts artifacts: "my-app/target/*.jar", fingerprint: false */
         }
       }
     }
  }
*/
}
