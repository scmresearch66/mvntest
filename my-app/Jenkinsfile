node("master") {
  checkout scm

  version = '1.0-SNAPSHOT'

  stage('Build site') {
    sh 'my-app/gradlew'
    sh 'type gradle'
    sh 'cd my-app && gradle build'

/*
    println "my-app/target/my-app-${version}.jar"
    assert file("my-app/target/my-app-${version}.jar").exists() 
    archiveArtifacts artifacts: 'my-app/target/my-app-${version}.jar', fingerprint: true, onlyIfSuccessful: true
*/
  }

/*  stage('Inside Docker') {
    timeout(60) {
      env.PATH = "/usr/local/bin:${env.PATH}"
      docker.image("centos:6.7").inside() {
        
        sh 'gradlew'
      }
    }
  }
*/
}
