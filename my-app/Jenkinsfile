node("master") {
  checkout scm

  version = '1.0-SNAPSHOT'

  stage('Build site') {
    sh 'cd my-app && ./gradlew build'

    println "my-app/target/my-app-${version}.jar"
    archiveArtifacts artifacts: "my-app/target/my-app-${version}.jar", fingerprint: true, onlyIfSuccessful: true
  }

  node("DockerNode") {
     env.PATH = "/usr/local/bin:${env.PATH}"

     stage('Inside Docker') {
       timeout(160) {
         img = docker.image("centos:6.7")

/*.inside() {
           sh 'hostname'
         }
*/
       }
     }
  }
}
