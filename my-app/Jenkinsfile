node {
  checkout scm

  env.PATH = "/usr/local/bin:${env.PATH}"

  stage('Build site') {
    sh 'id';
    sh 'echo $PATH';
    sh 'type docker';
    sh 'docker ps';
  }

  stage('Inside Docker') {
    timeout(60) {
      docker.image('java:8').inside {
        withEnv([ 'HOME=.' ]) {
          sh 'java --version'
        }
      }
    }
  }
}
